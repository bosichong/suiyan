<div class="blog-article">
<h1 class="title">Python中创建TCP服务器与客户端进行通信(下)Tk、thread与socket组合。</h1>
<span class="author">J.sky</span>
<span class="time">2017-10-13 10:57:48</span>
<span class="tag">Python基础</span>
</div>
</br>

先这样吧，为了不耽误稍后的学习进程，这个聊天室先码到这里，不想继续填坑了。服务器端用TK实现了图形展示，客户端依然终端。具体如下图：

![输入图片说明](assets/images/media/upload/2017/10/Snip20171013_1.png)
![输入图片说明](assets/images/media/upload/2017/10/Snip20171013_3.png)
## Tk多线程中的坑

+ 在图形化后，主线程中开出一条线程，不要直接在主线程中进行通信，不然循环会卡死，专门处理创建socket线程的工作线程，记得self.t.setDaemon(True)#这里很重要，不加程序界面会卡死！
+ 客户端没有实现图形化，完全不知道怎么弄，只要一启动，窗口就会被线程卡死，暂时先终端吧。

## 多用户服务器端

每条连接都创建一个socket，这样每个线程处理自己的收发消息，但是这种架构如果在大量连接下会占用很多的系统资源，如果把socket放到一个容器里，然后使用生成器协程来轮循收发消息，
这样的话只需要一个线程即可，性能必会提高不少，这正是稍后要学习的任务，也是python中的难点。

关于服务器的命令及私聊功能，这些应该都是通过消息来判断，所以后续一定会把消息进行封装发送，一条消息中应该包括命令及消息正文，这样就可以通过命令来判断用户的需求了。

## 客户端

客户端目前就是没有实现图形化，哪位大侠如果实现了，记得通知我，万分感谢，这个坑先放这里不踩了。

具体代码就不贴了，到git下载吧。

代码运行，请在终端中，不要在IDE中启动。代码运行，请在终端中，不要在IDE中启动。代码运行，请在终端中，不要在IDE中启动。

## 本文源码下载：

+ [github](https://github.com/bosichong/17python.com/tree/master/TCP/GUISocket)
+ [开源中国码云镜像gitee](https://gitee.com/J_Sky/17python.com/tree/master/TCP/GUISocket)